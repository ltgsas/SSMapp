<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ltgsas.mybatis.mapper.CasebasicMapper">

    <resultMap id="casebasicExtendOneMap" type="Casebasic">
        <id column="id" property="ID" jdbcType="INTEGER"/>
        <result column="cbid" property="CBID" jdbcType="INTEGER"/>
        <result column="cname" property="cName" jdbcType="VARCHAR"/>
        <result column="alias_name" property="aliasName" jdbcType="VARCHAR"/>
        <result column="grade" property="grade" jdbcType="VARCHAR"/>
        <result column="age" property="age" jdbcType="SMALLINT"/>
        <result column="email" property="eMail" jdbcType="VARCHAR"/>
        <result column="identity_card" property="IDNumber" jdbcType="VARCHAR"/>
        <result column="gender" property="gender" jdbcType="CHAR"/>
        <result column="member" property="member" jdbcType="BOOLEAN"/>
        <result column="mobile" property="mobile" jdbcType="VARCHAR"/>
        <result column="address" property="address" jdbcType="VARCHAR"/>
        <result column="join_date" property="joinDate" jdbcType="DATE"/>
        <association column="cbid" property="casescore" select="uniteScore"/>
    </resultMap>
    <select id="uniteScore" resultType="Casescore">
        select cbid                                                         as CBID,
               professionalcode                                             as ProfessionCode,
               mentor                                                       as Mentor,
               ascore                                                       as aScore,
               bscore                                                       as bScore,
               cscore                                                       as cScore,
               dscore                                                       as dScore,
               escore                                                       as eScore,
               fscore                                                       as fScore,
               gscore                                                       as gScore,
               hscore                                                       as hScore,
               ascore + bscore + cscore + dscore + escore + gscore + hscore as totalScore
        from casescore
        where cbid = #{cbid}
    </select>

    <resultMap id="casebasicMap" type="com.ltgsas.mybatis.pojo.Casebasic">
        <id column="id" property="ID" jdbcType="INTEGER"/>
        <result column="cbid" property="CBID" jdbcType="INTEGER"/>
        <result column="cname" property="cName" jdbcType="VARCHAR"/>
        <result column="alias_name" property="aliasName" jdbcType="VARCHAR"/>
        <result column="grade" property="grade" jdbcType="CHAR"/>
        <result column="age" property="age" jdbcType="SMALLINT"/>
        <result column="email" property="eMail" jdbcType="VARCHAR"/>
        <result column="identity_card" property="IDNumber" jdbcType="VARCHAR"/>
        <result column="gender" property="gender" jdbcType="CHAR"/>
        <result column="member" property="member" jdbcType="BOOLEAN"/>
        <result column="mobile" property="mobile" jdbcType="VARCHAR"/>
        <result column="address" property="address" jdbcType="VARCHAR"/>
        <result column="join_date" property="joinDate" jdbcType="DATE"/>
    </resultMap>

    <!--    List<Casebasic> getAllFromCasebasic();-->
    <select id="getAllFromCasebasic" resultMap="casebasicExtendOneMap">
        select *
        from casebasic
    </select>

    <!--    Casebasic getByIDFromCasebasic(int id);-->
    <select id="getByColumnOnID" resultMap="casebasicMap">
        select *
        from casebasic
        where id = #{id}
    </select>

    <!--    List<Casebasic> ListMoreRecordsFromCasebasic();-->
    <select id="ListMoreRecordsFromCasebasic" resultType="Casebasic">
        select *
        from casebasic
        where id in (${scope})
    </select>

    <!--    List<Casebasic> ListDynamicTable(String tableName);-->
    <select id="ListDynamicTable" resultType="Casebasic">
        select *
        from ${tableName}
                 limit 100,5
    </select>

    <!--    List<Casebasic> listByColumnInCname(String name);-->
    <select id="listByColumnInCname" resultMap="casebasicExtendOneMap">
        select *
        from casebasic
        where cname like concat('%', #{name}, '%');
        <!-- select * from casebasic where cname like '%${name}%' -->
        <!-- select * from casebasic where cname like "%"#{name}"%" -->
    </select>

    <!--    List<Casebasic> listCasebasicByColumnAndValue(@Param("columnName") String columnName, @Param("columnValue") String columnValue);-->
    <select id="listByColumnAndValue" resultMap="casebasicExtendOneMap">
        select *
        from casebasic
        where ${columnName} like concat('%', #{columnValue}, '%')
    </select>

    <!--    List<Casebasic> listCasebasicByLimit(Map<String, Integer> map);-->
    <select id="listByLimitUseMap" parameterType="map" resultMap="casebasicExtendOneMap">
        select *
        from casebasic
                 limit #{startIndex},#{pageSize}
    </select>

    <!-- 分页查询2 : 不推荐使用 -->
    <!--    List<Casebasic> listCasebasicByRowBounds();-->
    <select id="listUseRowBounds" resultMap="casebasicExtendOneMap">
        select *
        from casebasic
    </select>

    <!--    Casebasic listByColumnOnGrade(int id);-->
    <select id="listByColumnOnGrade" resultMap="casebasicExtendOneMap">
        select *
        from casebasic
        where grade = #{gradeNumber}
    </select>

    <!--    Map<String,Object> getAllToMap();-->
    <select id="getAllToMapFromCasebasic" resultType="map">
        select * from casebasic limit 800,5
    </select>

</mapper>